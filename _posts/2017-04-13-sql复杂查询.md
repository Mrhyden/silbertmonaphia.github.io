---
title: sql复杂查询
author: smona
published: true
date: '2017-04-13 11:13:37'
layout: post
---


#前言
　　前面的一篇文章写了下[数据库设计和SQL语句基础](%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E5%92%8CSQL%E8%AF%AD%E5%8F%A5%E5%9F%BA%E7%A1%80)，里面都是简单的增删改查，而且对最重要的**<font color="black">查询</font>**也没有深入研究，实在是罪过，那么本文就sql复杂的查询语句进行探讨，也是当作一个记录好了

#**No.1**
假设我们现在有张这样的score表(sn表示student_name学生姓名，cn表示课程class_name名字，sc表示score成绩)
| sn | cn | sc |
| ------| ------ | ------ |
| 光头 | 语文 | 9 |
| 吴克 |　语文 | 100 |
| 光头 | 物理 | 99 |
| 吴克 | 物理 | 7 |
| 光头 | 体育 | 100 |
| 吴克 | 体育 | 5 |
现在我们要求不及格(<60)科目大于等于2门的那个人的平均分，一条sql解决？
先post答案：
```
SELECT sn,AVG(sc) 
FROM score
WHERE sn
IN (SELECT sn FROM score WHERE sc<60 GROUP BY sn HAVING COUN(sc)>=2)
GROUP BY sn;
```

现在来理解上面这么一串东西
